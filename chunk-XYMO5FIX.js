import{a as E}from"./chunk-NPQTOPR7.js";import{a as M,b as N,d as j}from"./chunk-KCO6VNK2.js";import{i as B,k as T,x as k}from"./chunk-7DZB7B6B.js";import{Ca as d,Eb as I,Ga as _,Ka as f,Kb as H,Na as a,Oa as c,Pa as b,R as y,Ta as U,Ua as q,db as u,f as S,fb as s,lb as x,ma as r,mb as D,na as p,nb as l,ob as v,pb as h,va as g,xb as m}from"./chunk-ZUB5IIWK.js";var F=()=>["/send"];function P(n,e){if(n&1&&(a(0,"h3",3),u(1),l(2,"currency"),c()),n&2){let t=e;r(),s(" ",v(2,1,t.amount,t.currency)," ")}}function Q(n,e){if(n&1&&(a(0,"p",4),u(1),l(2,"currency"),c()),n&2){let t=e;r(),s(" Counter: ",v(2,1,t==null?null:t.amount,t==null?null:t.currency)," ")}}function V(n,e){if(n&1&&(a(0,"div",1),d(1,P,3,4,"h3",3),a(2,"p",4),u(3),l(4,"currency"),c(),a(5,"p",4),u(6),l(7,"currency"),c(),d(8,Q,3,4,"p",4),c()),n&2){let t,i,o=e,C=q();r(),f((t=C.baseValue())?1:-1,t),r(2),s("USDC ",h(4,4,o.usdc_amount,"",""),""),r(3),s("Fees (USDC): ",h(7,8,o.usdc_fees,"",""),""),r(2),f((i=C.counterValue())?8:-1,i)}}var w=class n{constructor(e,t,i){this.router=e;this.sendService=t;this.userService=i;if(this.quote=this.sendService.getQuote(),this.targetUser=this.sendService.getTargetUser(),this.currentUser=this.userService.user,!this.targetUser()||!this.quote()){this.router.navigate(["/lookup"]);return}}loading=g(!1);quote;targetUser;currentUser;symbol=m(()=>{let e=this.quote();return e?N(e.base):""});amount=m(()=>{let e=this.quote();return e?e.amount:0});baseValue=m(()=>{let e=this.quote();return e?{amount:e.base===this.currentUser().fiat_wallet_currency?e.amount:e.secondary_currency_quote,currency:e.base}:null});counterValue=m(()=>{let e=this.quote();return e?{amount:e.counter===this.currentUser().fiat_wallet_currency?e.amount:e.secondary_currency_quote,currency:e.counter}:null});next(){return S(this,null,function*(){let e=this.quote(),t=this.targetUser(),i=Number(e?.usdc_amount);if(!(!t||isNaN(i))){this.loading.set(!0);try{let o=yield this.sendService.acceptQuote(this.currentUser().phone_number,t.phone_number,i);this.router.navigate(["/"])}catch{}finally{this.loading.set(!1)}}})}static \u0275fac=function(t){return new(t||n)(p(H),p(j),p(E))};static \u0275cmp=y({type:n,selectors:[["app-confirm"]],standalone:!0,features:[x],decls:3,vars:4,consts:[["title","Confirm the transaction",3,"backButtonUrl"],[1,"mb-4"],["submitIcon","lucideSend","submitText","Send",3,"clicked","loading"],["hlmH3","",1,"text-4xl"],["hlmMuted",""]],template:function(t,i){if(t&1&&(b(0,"app-header",0),d(1,V,9,12,"div",1),a(2,"app-submit-button",2),U("clicked",function(){return i.next()}),c()),t&2){let o;_("backButtonUrl",D(3,F)),r(),f((o=i.quote())?1:-1,o),r(),_("loading",i.loading())}},dependencies:[M,k,B,T,I],styles:["div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}"]})};export{w as ConfirmComponent};
