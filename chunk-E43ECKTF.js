import{a as M}from"./chunk-ORAIKLTE.js";import{a as k}from"./chunk-OZK4UQGN.js";import{a as T,b as E}from"./chunk-WAGNSJXM.js";import{b as I,d as H,l as B}from"./chunk-EA7DF43O.js";import{Da as v,Ia as q,N as n,O as p,Oa as D,S as h,X as y,Z as l,ba as C,ca as r,d as S,da as o,ea as _,ga as U,na as c,pa as u,va as b,w as g,wa as x,xa as m,ya as d,za as f}from"./chunk-NFTVRMM5.js";var F=()=>["/send"];function N(s,t){if(s&1&&(r(0,"div",1)(1,"h3",3),c(2),m(3,"currency"),o(),r(4,"p",4),c(5),m(6,"currency"),o(),r(7,"p",4),c(8),m(9,"currency"),o(),r(10,"p",4),c(11),m(12,"currency"),o()()),s&2){let e=t;n(2),u(" ",d(3,4,e.secondary_currency_quote,"")," "),n(3),u("USDC ",f(6,7,e.usdc_amount,"",""),""),n(3),u("Fees (USDC): ",f(9,11,e.usdc_fees,"",""),""),n(3),u("Total: ",d(12,15,e.amount,e.amountCurrency),"")}}var j=class s{constructor(t,e,i){this.router=t;this.sendService=e;this.userService=i;if(this.quote=this.sendService.getQuote(),this.targetUser=this.sendService.getTargetUser(),this.currentUser=this.userService.user,!this.targetUser()||!this.quote()){this.router.navigate(["/lookup"]);return}}loading=h(!1);quote;targetUser;currentUser;symbol=v(()=>{let t=this.quote();return t?M(t.amountCurrency):""});amount=v(()=>{let t=this.quote();return t?t.amount:0});next(){return S(this,null,function*(){let t=this.quote(),e=this.targetUser(),i=Number(t?.usdc_amount);if(!(!t||!e||isNaN(i))){this.loading.set(!0);try{let a=yield this.sendService.acceptQuote(this.currentUser().phone_number,e.phone_number,i);this.router.navigate(["/"])}catch{}finally{this.loading.set(!1)}}})}static \u0275fac=function(e){return new(e||s)(p(D),p(E),p(k))};static \u0275cmp=g({type:s,selectors:[["app-confirm"]],standalone:!0,features:[b],decls:3,vars:4,consts:[["title","Confirm the transaction",3,"backButtonUrl"],[1,"mb-4"],["submitIcon","lucideSend","submitText","Send",3,"clicked","loading"],["hlmH3","",1,"text-4xl"],["hlmMuted",""]],template:function(e,i){if(e&1&&(_(0,"app-header",0),y(1,N,13,18,"div",1),r(2,"app-submit-button",2),U("clicked",function(){return i.next()}),o()),e&2){let a;l("backButtonUrl",x(3,F)),n(),C((a=i.quote())?1:-1,a),n(),l("loading",i.loading())}},dependencies:[T,B,I,H,q],styles:["div[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}"]})};export{j as ConfirmComponent};
