import{f as se,g as ne,h as re,i as ie,j as ae,k as oe}from"./chunk-EA7DF43O.js";import{B as Q,C as j,H,I as g,J as v,N as _,S as b,T as E,X as W,Y as J,Z as F,a as o,b as N,ba as V,c as L,ca as $,d as a,da as G,e as C,ea as x,f as S,fa as K,g as P,ga as M,ha as z,la as X,ma as Y,na as k,p as T,pa as Z,ua as ee,va as te,w as D}from"./chunk-NFTVRMM5.js";var we=["submitButton"];function Ce(n,s){n&1&&(x(0,"hlm-icon",2),k(1," Loading "))}function Se(n,s){if(n&1&&(x(0,"hlm-icon",3),k(1)),n&2){let t=z();F("name",t.submitIcon()),_(),Z(" ",t.submitText()," ")}}var ce=class n{loading=g(!1);submitIcon=g("lucideArrowRight");submitText=g("Next");clicked=H();submitButton=E.required("submitButton",{read:v});focus(){this.submitButton().nativeElement.focus()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=D({type:n,selectors:[["app-submit-button"]],viewQuery:function(t,e){t&1&&X(e.submitButton,we,5,v),t&2&&Y()},inputs:{loading:[1,"loading"],submitIcon:[1,"submitIcon"],submitText:[1,"submitText"]},outputs:{clicked:"clicked"},standalone:!0,features:[ee([re({lucideLoader2:ae,lucideArrowRight:ie,lucideSend:oe})]),te],decls:4,vars:2,consts:[["submitButton",""],["hlmBtn","","type","submit",3,"click"],["name","lucideLoader2","size","sm",1,"mr-2","animate-spin"],["size","sm",1,"mr-2",3,"name"]],template:function(t,e){if(t&1){let r=K();$(0,"button",1,0),M("click",function(){return Q(r),j(e.clicked.emit())}),W(2,Ce,2,0)(3,Se,2,2),G()}t&2&&(J("disabled",e.loading()?!0:null),_(2),V(e.loading()?2:3))},dependencies:[se,ne],styles:["[_nghost-%COMP%]{display:block}button[_ngcontent-%COMP%]{width:100%}"]})};var ue="http://localhost:4000";var h=class{deposits;frontend;payments;users;withdrawals;constructor(s,t){let e=new O(s,t??{});this.deposits=new le.ServiceClient(e),this.frontend=new de.ServiceClient(e),this.payments=new pe.ServiceClient(e),this.users=new me.ServiceClient(e),this.withdrawals=new he.ServiceClient(e)}},le;(s=>{class n{baseClient;constructor(e){this.baseClient=e}Create(e){return a(this,null,function*(){return yield(yield this.baseClient.callAPI("POST","/deposits/create")).json()})}}s.ServiceClient=n})(le||={});var de;(s=>{class n{baseClient;constructor(e){this.baseClient=e}Serve(e,r,i,u){return a(this,null,function*(){return this.baseClient.callAPI(e,`/frontend/${r.map(encodeURIComponent).join("/")}`,i,u)})}}s.ServiceClient=n})(de||={});var pe;(s=>{class n{baseClient;constructor(e){this.baseClient=e}GetWallet(e){return a(this,null,function*(){return yield(yield this.baseClient.callAPI("POST",`/payments/balance/${encodeURIComponent(e)}`)).json()})}Quote(e){return a(this,null,function*(){return yield(yield this.baseClient.callAPI("POST","/payments/quote",JSON.stringify(e))).json()})}Send(e){return a(this,null,function*(){return yield(yield this.baseClient.callAPI("POST","/payments/send",JSON.stringify(e))).json()})}}s.ServiceClient=n})(pe||={});var me;(s=>{class n{baseClient;constructor(e){this.baseClient=e}Create(e){return a(this,null,function*(){return yield(yield this.baseClient.callAPI("POST","/users/create",JSON.stringify(e))).json()})}LookupByPhoneNo(e){return a(this,null,function*(){return yield(yield this.baseClient.callAPI("POST","/users/lookup",JSON.stringify(e))).json()})}}s.ServiceClient=n})(me||={});var he;(s=>{class n{baseClient;constructor(e){this.baseClient=e}Create(e){return a(this,null,function*(){return yield(yield this.baseClient.callAPI("POST","/withdrawals/create")).json()})}}s.ServiceClient=n})(he||={});function R(n){let s=[];for(let t in n){let e=Array.isArray(n[t])?n[t]:[n[t]];for(let r of e)s.push(`${t}=${encodeURIComponent(r)}`)}return s.join("&")}function Pe(n){return"encore.dev.headers."+btoa(JSON.stringify(n)).replaceAll("=","").replaceAll("+","-").replaceAll("/","_")}var f=class{ws;hasUpdateHandlers=[];constructor(s,t){let e=["encore-ws"];t&&e.push(Pe(t)),this.ws=new WebSocket(s,e),this.on("error",()=>{this.resolveHasUpdateHandlers()}),this.on("close",()=>{this.resolveHasUpdateHandlers()})}resolveHasUpdateHandlers(){let s=this.hasUpdateHandlers;this.hasUpdateHandlers=[];for(let t of s)t()}hasUpdate(){return a(this,null,function*(){yield new Promise(s=>{this.hasUpdateHandlers.push(()=>s(null))})})}on(s,t){this.ws.addEventListener(s,t)}off(s,t){this.ws.removeEventListener(s,t)}close(){this.ws.close()}},I=class{socket;buffer=[];constructor(s,t){this.socket=new f(s,t),this.socket.on("message",e=>{this.buffer.push(JSON.parse(e.data)),this.socket.resolveHasUpdateHandlers()})}close(){this.socket.close()}send(s){return a(this,null,function*(){return this.socket.ws.readyState===WebSocket.CONNECTING&&(yield new Promise(t=>{this.socket.ws.addEventListener("open",t,{once:!0})})),this.socket.ws.send(JSON.stringify(s))})}next(){return a(this,null,function*(){try{for(var s=P(this),t,e,r;t=!(e=yield s.next()).done;t=!1){let i=e.value;return i}}catch{r=[e]}finally{try{t&&(e=s.return)&&(yield e.call(s))}finally{if(r)throw r[0]}}})}[Symbol.asyncIterator](){return S(this,null,function*(){for(;;)if(this.buffer.length>0)yield this.buffer.shift();else{if(this.socket.ws.readyState===WebSocket.CLOSED)return;yield new C(this.socket.hasUpdate())}})}},U=class{socket;buffer=[];constructor(s,t){this.socket=new f(s,t),this.socket.on("message",e=>{this.buffer.push(JSON.parse(e.data)),this.socket.resolveHasUpdateHandlers()})}close(){this.socket.close()}next(){return a(this,null,function*(){try{for(var s=P(this),t,e,r;t=!(e=yield s.next()).done;t=!1){let i=e.value;return i}}catch{r=[e]}finally{try{t&&(e=s.return)&&(yield e.call(s))}finally{if(r)throw r[0]}}})}[Symbol.asyncIterator](){return S(this,null,function*(){for(;;)if(this.buffer.length>0)yield this.buffer.shift();else{if(this.socket.ws.readyState===WebSocket.CLOSED)return;yield new C(this.socket.hasUpdate())}})}},q=class{socket;responseValue;constructor(s,t){let e;this.responseValue=new Promise(r=>e=r),this.socket=new f(s,t),this.socket.on("message",r=>{e(JSON.parse(r.data))})}response(){return a(this,null,function*(){return this.responseValue})}close(){this.socket.close()}send(s){return a(this,null,function*(){return this.socket.ws.readyState===WebSocket.CONNECTING&&(yield new Promise(t=>{this.socket.ws.addEventListener("open",t,{once:!0})})),this.socket.ws.send(JSON.stringify(s))})}},ve=fetch.bind(void 0),O=class{baseURL;fetcher;headers;requestInit;constructor(s,t){this.baseURL=s,this.headers={"Content-Type":"application/json"},typeof window>"u"&&(this.headers["User-Agent"]="elixir-money-73o2-Generated-TS-Client (Encore/v1.42.1)"),this.requestInit=t.requestInit??{},t.fetcher!==void 0?this.fetcher=t.fetcher:this.fetcher=ve}getAuthData(){return a(this,null,function*(){})}createStreamInOut(s,t){return a(this,null,function*(){let{query:e,headers:r}=t??{},i=yield this.getAuthData();i&&(i.query&&(e=o(o({},e),i.query)),i.headers&&(r=o(o({},r),i.headers)));let u=e?"?"+R(e):"";return new I(this.baseURL+s+u,r)})}createStreamIn(s,t){return a(this,null,function*(){let{query:e,headers:r}=t??{},i=yield this.getAuthData();i&&(i.query&&(e=o(o({},e),i.query)),i.headers&&(r=o(o({},r),i.headers)));let u=e?"?"+R(e):"";return new U(this.baseURL+s+u,r)})}createStreamOut(s,t){return a(this,null,function*(){let{query:e,headers:r}=t??{},i=yield this.getAuthData();i&&(i.query&&(e=o(o({},e),i.query)),i.headers&&(r=o(o({},r),i.headers)));let u=e?"?"+R(e):"";return new q(this.baseURL+s+u,r)})}callAPI(s,t,e,r){return a(this,null,function*(){let A=r??{},{query:i,headers:u}=A,ge=L(A,["query","headers"]),l=N(o(o({},this.requestInit),ge),{method:s,body:e??null});l.headers=o(o(o({},this.headers),l.headers),u);let d=yield this.getAuthData();d&&(d.query&&(i=o(o({},i),d.query)),d.headers&&(l.headers=o(o({},l.headers),d.headers)));let be=i?"?"+R(i):"",p=yield this.fetcher(this.baseURL+t+be,l);if(!p.ok){let m={code:"unknown",message:`request failed: status ${p.status}`};try{let y=yield p.text();try{let w=JSON.parse(y);_e(w)?m=w:m.message+=": "+JSON.stringify(w)}catch{m.message+=": "+y}}catch(y){m.message+=": "+String(y)}throw new B(p.status,m)}return p})}};function _e(n){return n!=null&&xe(n.code)&&typeof n.message=="string"&&(n.details===void 0||n.details===null||typeof n.details=="object")}function xe(n){return n!==void 0&&Object.values(fe).includes(n)}var B=class n extends Error{status;code;details;constructor(s,t){super(t.message),Object.defineProperty(this,"name",{value:"APIError",enumerable:!1,configurable:!0}),Object.setPrototypeOf==null?this.__proto__=n.prototype:Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.status=s,this.code=t.code,this.details=t.details}};var fe=(c=>(c.OK="ok",c.Canceled="canceled",c.Unknown="unknown",c.InvalidArgument="invalid_argument",c.DeadlineExceeded="deadline_exceeded",c.NotFound="not_found",c.AlreadyExists="already_exists",c.PermissionDenied="permission_denied",c.ResourceExhausted="resource_exhausted",c.FailedPrecondition="failed_precondition",c.Aborted="aborted",c.OutOfRange="out_of_range",c.Unimplemented="unimplemented",c.Internal="internal",c.Unavailable="unavailable",c.DataLoss="data_loss",c.Unauthenticated="unauthenticated",c))(fe||{});var ye=class n{client=new h(ue);targetUser=b(null);getTargetUser(){return this.targetUser.asReadonly()}setTargetUser(s){this.targetUser.set(s)}clearTargetUser(){this.targetUser.set(null)}quote=b(null);getQuote(){return this.quote.asReadonly()}setQuote(s){this.quote.set(s)}clearQuote(){this.quote.set(null)}amount=b(null);getAmount(){return this.amount.asReadonly()}setAmount(s){this.amount.set(s)}clearAmount(){this.quote.set(null)}lookupPhoneNo(s){return a(this,null,function*(){return(yield this.client.users.LookupByPhoneNo({UserPhoneNo:s})).user})}generateQuote(s,t,e){return a(this,null,function*(){return yield this.client.payments.Quote({amount:s,currency_code:t,secondary_currency_code:e})})}acceptQuote(s,t,e){return a(this,null,function*(){return yield this.client.payments.Send({sender_phone_no:s,target_phone_no:t,amount_usdc:e})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})};export{ce as a,ye as b};
