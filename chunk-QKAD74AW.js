import{c as M,d as L,g as w,h as j,i as R}from"./chunk-6XXA7HXI.js";import{b as A,c as O,d as W,e as z,f as G,g as J,h as K,i as Q,k as X,l as Y,m as Z,n as $}from"./chunk-BEV72FF3.js";import{a as u,c as i,j as q}from"./chunk-NXZILXPK.js";import{$ as a,Fa as I,G as c,K as N,L as n,M as D,Q as T,U as V,W as f,Z as m,_ as C,aa as s,ba as H,ca as S,d as P,da as F,ia as d,ja as _,la as U,qa as E,ra as B,va as l,w as k,y as p}from"./chunk-47N7F2CL.js";var ue=i("p-6 pt-0",{variants:{},defaultVariants:{}});var re=i("text-sm text-muted-foreground",{variants:{},defaultVariants:{}}),h=class r{userClass=c("",{alias:"class"});_computedClass=l(()=>u(re(),this.userClass()));static \u0275fac=function(e){return new(e||r)};static \u0275dir=p({type:r,selectors:[["","hlmCardDescription",""]],hostVars:2,hostBindings:function(e,t){e&2&&m(t._computedClass())},inputs:{userClass:[1,"class","userClass"]},standalone:!0})};var Ve=i("flex p-6 pt-0",{variants:{direction:{row:"flex-row items-center space-x-1.5",column:"flex-col space-y-1.5"}},defaultVariants:{direction:"row"}});var oe=i("flex p-6",{variants:{direction:{row:"flex-row items-center space-x-1.5",column:"flex-col space-y-1.5"}},defaultVariants:{direction:"column"}}),v=class r{userClass=c("",{alias:"class"});_computedClass=l(()=>u(oe({direction:this.direction()}),this.userClass()));direction=c("column");static \u0275fac=function(e){return new(e||r)};static \u0275dir=p({type:r,selectors:[["","hlmCardHeader",""]],hostVars:2,hostBindings:function(e,t){e&2&&m(t._computedClass())},inputs:{userClass:[1,"class","userClass"],direction:[1,"direction"]},standalone:!0})};var ie=i("text-lg font-semibold leading-none tracking-tight",{variants:{},defaultVariants:{}}),y=class r{userClass=c("",{alias:"class"});_computedClass=l(()=>u(ie(),this.userClass()));static \u0275fac=function(e){return new(e||r)};static \u0275dir=p({type:r,selectors:[["","hlmCardTitle",""]],hostVars:2,hostBindings:function(e,t){e&2&&m(t._computedClass())},inputs:{userClass:[1,"class","userClass"]},standalone:!0})};var ne=i("rounded-lg border border-border bg-card focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-card-foreground shadow-sm",{variants:{},defaultVariants:{}}),g=class r{userClass=c("",{alias:"class"});_computedClass=l(()=>u(ne(),this.userClass()));static \u0275fac=function(e){return new(e||r)};static \u0275dir=p({type:r,selectors:[["","hlmCard",""]],hostVars:2,hostBindings:function(e,t){e&2&&m(t._computedClass())},inputs:{userClass:[1,"class","userClass"]},standalone:!0})};var ae=()=>["/"];function se(r,o){r&1&&(a(0,"hlm-error"),d(1,"Phone number is required."),s())}function le(r,o){r&1&&(a(0,"hlm-error"),d(1,"Invalid phone number provided."),s())}function ce(r,o){if(r&1&&V(0,se,2,0,"hlm-error")(1,le,2,0,"hlm-error"),r&2){let e=F();C(e.phoneNumberControl.hasError("required")?0:-1),n(),C(e.phoneNumberControl.hasError("invalid")?1:-1)}}function pe(r,o){if(r&1&&(a(0,"section",4)(1,"div",6),H(2,"img",7),a(3,"div",8)(4,"h3",9),d(5),s(),a(6,"p",10),d(7),s(),a(8,"span"),d(9),s(),a(10,"p",10),d(11),s()()()()),r&2){let e=o,t=F();f("@fadeIn",void 0),n(2),f("src",e.image_url,N)("alt",e.first_name+" "+e.surname),n(3),U("",e.first_name," ",e.surname,""),n(2),_(e.country_code),n(2),_(t.flagEmoji()),n(2),_(e.phone_number)}}var me=M("fadeIn",[j("void",w({opacity:0})),R(":enter",[L("500ms ease-in",w({opacity:1}))])]),ee=class r{constructor(o,e){this.sendService=o;this.router=e;this.sendService.clearTargetUser(),this.targetUser=this.sendService.getTargetUser()}loading=T(!1);phoneNumberControl=new z("",[O.required]);targetUser;flagEmoji=l(()=>{let o=this.targetUser();if(!o?.country_code)return null;let e=o.country_code.toUpperCase().split("").map(t=>127462+t.charCodeAt(0)-65);return String.fromCodePoint(...e)});lookupPhoneNo(o){return P(this,null,function*(){let e=this.phoneNumberControl.value;if(!this.phoneNumberControl.valid||!e){this.sendService.clearTargetUser();return}this.loading.set(!0);try{let t=yield this.sendService.lookupPhoneNo(e);if(!t){this.phoneNumberControl.setErrors({invalid:"User not found"});return}this.sendService.setTargetUser(t)}catch(t){this.sendService.clearTargetUser(),console.error("error",t),this.phoneNumberControl.setErrors({invalid:"User not found"})}finally{this.loading.set(!1)}})}next(){let o=this.targetUser();if(!this.phoneNumberControl.valid||!o){this.phoneNumberControl.markAsTouched();return}this.router.navigate(["/send"])}static \u0275fac=function(e){return new(e||r)(D($),D(I))};static \u0275cmp=k({type:r,selectors:[["app-lookup"]],standalone:!0,features:[E],decls:8,vars:6,consts:[["title","Who do you want to send money to?",3,"backButtonUrl"],[1,"mb-4"],["hlmLabel",""],["hlmInput","","type","text","placeholder","Who do you want to send money to?",1,"w-80",3,"blur","formControl"],["hlmCard","",1,"mb-4","fade-in"],[3,"clicked","loading"],["hlmCardHeader",""],["width","96","height","96",3,"src","alt"],[1,"ml-2"],["hlmCardTitle",""],["hlmCardDescription",""]],template:function(e,t){if(e&1&&(H(0,"app-header",0),a(1,"hlm-form-field",1)(2,"label",2),d(3,"Phone number "),a(4,"input",3),S("blur",function(te){return t.lookupPhoneNo(te)}),s()(),V(5,ce,2,2),s(),V(6,pe,12,8,"section",4),a(7,"app-submit-button",5),S("clicked",function(){return t.next()}),s()),e&2){let x;f("backButtonUrl",B(5,ae)),n(4),f("formControl",t.phoneNumberControl),n(),C(t.phoneNumberControl.invalid&&(t.phoneNumberControl.dirty||t.phoneNumberControl.touched)?5:-1),n(),C((x=t.targetUser())?6:-1,x),n(),f("loading",t.loading())}},dependencies:[X,Q,K,Y,h,g,v,y,J,A,W,G,Z,q],styles:["[hlmCardHeader][_ngcontent-%COMP%]{display:flex;flex-flow:row}[hlmCardHeader][_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:25%}"],data:{animation:[me]}})};export{ee as LookupComponent,me as fadeIn};
